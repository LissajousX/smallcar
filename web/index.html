<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>SmallCar 远程控制面板</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="top-bar">
    <h1>SmallCar 远程控制</h1>
    <div class="top-right">
      <div class="ws-config">
        <label class="ws-label">
          <span>WS地址：</span>
          <input
            id="ws-url"
            class="top-pill-input"
            type="text"
            value="ws://192.168.31.140:8765/ws_control"
          />
        </label>
        <button id="ws-connect-btn">连接</button>
        <span id="ws-status" class="status status-disconnected">未连接</span>
      </div>
    </div>
  </header>

  <main class="layout">
    <section class="panel panel-video">
      <div class="video-header">
        <label class="video-url-label">
          视频流地址：
          <input
            id="video-url"
            class="top-pill-input"
            type="text"
            value="http://192.168.31.140:81/stream"
            placeholder="如 http://ESP32_IP:PORT/stream"
          />
        </label>
        <button id="video-load-btn">加载</button>
      </div>
      <div class="video-box">
        <img id="video-view" alt="视频预览" src="placeholder-video.svg" />
        <div class="video-overlay">
          <div class="overlay-panel overlay-drive">
            <div class="overlay-header">
              <div class="overlay-title">小车</div>
              <button id="ov-speed-gear" class="overlay-speed-btn">速：<span id="ov-speed-label">中</span></button>
            </div>
            <div class="overlay-dpad">
              <div class="overlay-row">
                <button id="ov-drive-nw" class="overlay-btn">↖</button>
                <button id="ov-drive-forward" class="overlay-btn">↑</button>
                <button id="ov-drive-ne" class="overlay-btn">↗</button>
              </div>
              <div class="overlay-row">
                <button id="ov-drive-left" class="overlay-btn">←</button>
                <button id="ov-drive-stop" class="overlay-btn">■</button>
                <button id="ov-drive-right" class="overlay-btn">→</button>
              </div>
              <div class="overlay-row">
                <button id="ov-drive-sw" class="overlay-btn">↙</button>
                <button id="ov-drive-backward" class="overlay-btn">↓</button>
                <button id="ov-drive-se" class="overlay-btn">↘</button>
              </div>
            </div>
          </div>
          <div class="overlay-panel overlay-gimbal">
            <div class="overlay-title">云台</div>
            <div class="overlay-dpad">
              <div class="overlay-row">
                <button id="ov-gimbal-up" class="overlay-btn">↑</button>
              </div>
              <div class="overlay-row">
                <button id="ov-gimbal-left" class="overlay-btn">←</button>
                <button id="ov-gimbal-center" class="overlay-btn">◎</button>
                <button id="ov-gimbal-right" class="overlay-btn">→</button>
              </div>
              <div class="overlay-row">
                <button id="ov-gimbal-down" class="overlay-btn">↓</button>
              </div>
            </div>
          </div>
          <div class="overlay-status-chip">
            T<span id="ov-status-throttle">0</span>
            S<span id="ov-status-steer">0</span>
            Y<span id="ov-status-yaw">90</span>°
            P<span id="ov-status-pitch">90</span>°
          </div>
        </div>
      </div>
    </section>

    <section class="panel panel-status">
      <h2>当前状态</h2>
      <div class="status-grid">
        <div class="status-item">
          <div class="status-label">油门 / 转向 / 云台角度 / 指令</div>
          <div class="status-value">
            T<span id="status-throttle">0</span>
            S<span id="status-steer">0</span>
            Y<span id="status-yaw">90</span>°
            P<span id="status-pitch">90</span>°
            |
            <span class="status-payload" id="last-payload">--</span>
          </div>
        </div>
      </div>
    </section>

    <section class="panel panel-controls">
      <div class="panel-controls-grid">
        <section class="panel panel-drive">
          <div class="panel-drive-header">
            <h2>小车运动</h2>
            <button id="btn-speed-gear" class="small-btn">速度：<span id="speed-gear-label">中</span></button>
          </div>

          <div class="direction-pad">
            <div class="direction-row">
              <button id="btn-drive-nw" class="direction-btn">
                <span class="dir-arrow">↖</span>
                <span class="dir-key">Q</span>
              </button>
              <button id="btn-forward" class="direction-btn">
                <span class="dir-arrow">↑</span>
                <span class="dir-key">W</span>
              </button>
              <button id="btn-drive-ne" class="direction-btn">
                <span class="dir-arrow">↗</span>
                <span class="dir-key">E</span>
              </button>
            </div>
            <div class="direction-row">
              <button id="btn-left" class="direction-btn">
                <span class="dir-arrow">←</span>
                <span class="dir-key">A</span>
              </button>
              <button id="btn-stop" class="direction-btn danger">
                <span class="dir-arrow">■</span>
                <span class="dir-key">S</span>
              </button>
              <button id="btn-right" class="direction-btn">
                <span class="dir-arrow">→</span>
                <span class="dir-key">D</span>
              </button>
            </div>
            <div class="direction-row">
              <button id="btn-drive-sw" class="direction-btn">
                <span class="dir-arrow">↙</span>
                <span class="dir-key">Z</span>
              </button>
              <button id="btn-backward" class="direction-btn">
                <span class="dir-arrow">↓</span>
                <span class="dir-key">X</span>
              </button>
              <button id="btn-drive-se" class="direction-btn">
                <span class="dir-arrow">↘</span>
                <span class="dir-key">C</span>
              </button>
            </div>
          </div>

          <div class="field field-slider">
            <label for="throttle">油门（前进/后退）：<span id="throttle-value">0</span></label>
            <input id="throttle" type="range" min="-100" max="100" value="0" />
            <div class="hint">负数：后退，正数：前进；范围 -100..100。</div>
          </div>

          <div class="field field-slider">
            <label for="steer">转向（左/右）：<span id="steer-value">0</span></label>
            <input id="steer" type="range" min="-100" max="100" value="0" />
            <div class="hint">负数：向左；正数：向右；范围 -100..100。</div>
          </div>
        </section>

        <section class="panel panel-gimbal">
          <h2>云台控制</h2>

          <div class="gimbal-pad">
            <div class="direction-row">
              <button id="btn-gimbal-up" class="direction-btn">↑</button>
            </div>
            <div class="direction-row">
              <button id="btn-gimbal-left" class="direction-btn">←</button>
              <button id="btn-center-gimbal" class="direction-btn">◎</button>
              <button id="btn-gimbal-right" class="direction-btn">→</button>
            </div>
            <div class="direction-row">
              <button id="btn-gimbal-down" class="direction-btn">↓</button>
            </div>
          </div>

          <div class="field field-slider">
            <label for="yaw">水平角 Yaw：<span id="yaw-value">90</span>°</label>
            <input id="yaw" type="range" min="30" max="150" value="90" />
          </div>

          <div class="field field-slider">
            <label for="pitch">俯仰角 Pitch：<span id="pitch-value">90</span>°</label>
            <input id="pitch" type="range" min="45" max="135" value="90" />
          </div>
        </section>
      </div>
    </section>

  </main>

  <script src="main.js"></script>
</body>
</html>
