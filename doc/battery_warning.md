# Web ç«¯ç”µé‡é¢„è­¦å®žçŽ°æ–¹æ¡ˆè¯´æ˜Žï¼ˆè‰æ¡ˆï¼‰

## 1. ç›®æ ‡ä¸Žæ€»ä½“æ€è·¯

ç›®æ ‡ï¼šåœ¨æµè§ˆå™¨ Web æŽ§åˆ¶ç•Œé¢ä¸Šå®žæ—¶æ˜¾ç¤ºå°è½¦ç”µæ± ç”µé‡ï¼Œå¹¶åœ¨ç”µé‡è¿‡ä½Žæ—¶ç»™å‡ºæ˜Žæ˜¾é¢„è­¦ï¼ˆå›¾æ ‡å˜è‰²/æç¤ºæ–‡æ¡ˆï¼‰ï¼Œé¿å… 3S é”‚ç”µæ± è¿‡æ”¾ã€‚

æ•´ä½“é“¾è·¯ï¼š

> **3S é”‚ç”µæ± ç”µåŽ‹**  
> â†’ ç”µé˜»åˆ†åŽ‹ + ADC é‡‡æ ·ï¼ˆæŽ¨èæŽ¥ ESP32-CAMï¼‰  
> â†’ ESP32 å›ºä»¶è®¡ç®—ç”µæ± ç”µåŽ‹/ç™¾åˆ†æ¯”ï¼Œå†™å…¥ `/status` JSON  
> â†’ Web å‰ç«¯å‘¨æœŸè¯·æ±‚ `/status`ï¼Œæ˜¾ç¤ºç”µé‡å¹¶åšé˜ˆå€¼é¢„è­¦

æŽ¨èæ–¹æ¡ˆæ˜¯ï¼š**ç”± ESP32-CAM ç›´æŽ¥æµ‹é‡ç”µæ± ç”µåŽ‹**ï¼Œä¸æ”¹ STM32 ä¸²å£åè®®ï¼Œåªåœ¨ ESP32 å›ºä»¶å’Œ Web å‰ç«¯åšæ‰©å±•ã€‚

---

## 2. ç¡¬ä»¶è®¾è®¡ï¼šç”µæ± ç”µåŽ‹é‡‡æ ·ç”µè·¯

### 2.1 å½“å‰ç”µæºæ¦‚å†µ

- ç”µæ± ï¼š3 èŠ‚ 18650 ä¸²è”ï¼Œæ»¡ç”µçº¦ **12.6V**ï¼Œæ ‡ç§° 11.1Vã€‚
- é€šè¿‡ sy8205fcc é™åŽ‹åˆ° 5Vï¼Œä¾›ç”µå¯¹è±¡ï¼š
  - 2Ã— SG90 èˆµæœº
  - 1Ã— TB6612FNG + 4 ä¸ªç›´æµç”µæœº
  - STM32 æœ€å°ç³»ç»Ÿ
  - ESP32-CAM æ¨¡å—

ç”µé‡é¢„è­¦åº”åŸºäºŽ **ç”µæ± åŒ…ç”µåŽ‹**ï¼ˆ12.6V é‚£ä¸€è·¯ï¼‰ï¼Œä¸æ˜¯ 5V è¾“å‡ºã€‚

### 2.2 æŽ¥ ESP32-CAM çš„ ADCï¼šç”µé˜»åˆ†åŽ‹

åœ¨ç”µæ± æ­£æžå’Œ ESP32 ADC å¼•è„šä¹‹é—´å¢žåŠ ä¸€ä¸ªç”µåŽ‹åˆ†åŽ‹ç”µè·¯ï¼Œå°† 12.6V é™åˆ° 3.3V ä»¥ä¸‹ã€‚

#### 2.2.1 åŽŸç†ä¸Žé˜»å€¼é€‰æ‹©

é‡‡ç”¨å…¸åž‹çš„ä¸¤ç”µé˜»åˆ†åŽ‹ï¼š

- ç”µæ± æ­£æžï¼š`Vbat`ï¼ˆæœ€é«˜ 12.6Vï¼‰
- ä¸Šæ‹‰ç”µé˜»ï¼š`R1`
- ä¸‹æ‹‰ç”µé˜»ï¼š`R2`
- åˆ†åŽ‹ç‚¹æŽ¥åˆ° ESP32 çš„ ADC å¼•è„š
- ä¸‹ç«¯æŽ¥ GNDï¼ˆå’Œæ•´è½¦å…±åœ°ï¼‰

æŽ¨èä¸€ä¸ªå‚æ•°ç»„åˆï¼ˆç¤ºä¾‹ï¼‰ï¼š

- `R1 = 100kÎ©`ï¼ˆä¸Šæ‹‰ï¼‰
- `R2 = 33kÎ©`ï¼ˆä¸‹æ‹‰ï¼‰

æœ€å¤§ç”µæ± ç”µåŽ‹ 12.6V æ—¶ï¼ŒADC ç«¯ç”µåŽ‹ä¸ºï¼š

\[
V_{ADCmax} = 12.6V \times \frac{R2}{R1 + R2}
\approx 12.6 \times \frac{33}{133} \approx 3.1V
\]

å®‰å…¨ä½ŽäºŽ 3.3V ä¸Šé™ã€‚

åˆ†åŽ‹ç”µè·¯ç”µæµï¼š

\[
I = \frac{12.6V}{R1 + R2} \approx \frac{12.6}{133k} \approx 0.095mA
\]

å‡ ä¹Žå¯ä»¥å¿½ç•¥ï¼Œå¯¹ç”µæ± æ²¡æœ‰æ˜Žæ˜¾é¢å¤–è´Ÿè½½ã€‚

#### 2.2.2 è¿žæŽ¥ç¤ºæ„ï¼ˆæŽ¨èæŽ¥ ESP32 GPIO34ï¼‰

å‡è®¾é€‰æ‹© ESP32-CAM ä¸Šä¸€ä¸ªå¯ç”¨çš„ ADC å¼•è„šï¼ˆä¾‹å¦‚ GPIO34ï¼Œå¯¹åº” ADC1_CH6ï¼Œå…·ä½“ä»¥å®žé™…æ¨¡å—å¯ç”¨å¼•è„šä¸ºå‡†ï¼‰ï¼š

```text
         3S ç”µæ± åŒ…
      +-----------+
      |           |
  Vbat+           |
      |           |
      +----R1=100kÎ©----+------>  ESP32-CAM GPIO34 (ADC è¾“å…¥)
                        |
                      R2=33kÎ©
                        |
                       GND  (ä¸Žæ•´è½¦å…±åœ°)
```

- `Vbat+`ï¼šç”µæ± æ­£æžï¼ˆâ€» æ³¨æ„ä¸æ˜¯ 5V è¾“å‡ºï¼Œè€Œæ˜¯ 3 èŠ‚ç”µæ± ä¸²è”åŽçš„åŽŸå§‹ç”µåŽ‹ï¼‰ã€‚
- `R1` ä¸€ç«¯æŽ¥ `Vbat+`ï¼Œå¦ä¸€ç«¯æŽ¥â€œé‡‡æ ·ç‚¹â€ã€‚
- `R2` ä¸€ç«¯æŽ¥â€œé‡‡æ ·ç‚¹â€ï¼Œå¦ä¸€ç«¯æŽ¥ç³»ç»Ÿå…¬å…±åœ°ï¼ˆå’Œ STM32 / ESP32 / TB6612 å…±åœ°ï¼‰ã€‚
- â€œé‡‡æ ·ç‚¹â€æŽ¥åˆ° ESP32 çš„ ADC å¼•è„šï¼ˆGPIO34 / GPIO35 ç­‰ï¼‰ã€‚

**å¯é€‰ä¼˜åŒ–ï¼š**

- åœ¨â€œé‡‡æ ·ç‚¹â€å’Œ GND ä¹‹é—´å¹¶ä¸€ä¸ªå°ç”µå®¹ï¼ˆä¾‹å¦‚ 0.1ÂµF ~ 1ÂµFï¼‰ï¼Œæž„æˆç®€å• RC æ»¤æ³¢ï¼Œé™ä½Žç”µæœºå™ªå£°å¯¹ ADC çš„å½±å“ã€‚
- å¦‚æžœçº¿è·¯è¾ƒé•¿ï¼Œå¯ä»¥é è¿‘ ESP32 ä¸€ç«¯å¸ƒè¿™ä¸ª RC æ»¤æ³¢ã€‚

#### 2.2.3 å®‰å…¨æ³¨æ„äº‹é¡¹

- ä¸Šç”µå‰ï¼Œç”¨ä¸‡ç”¨è¡¨ç¡®è®¤åˆ†åŽ‹åŽåœ¨æœ€å¤§ç”µæ± ç”µåŽ‹ä¸‹ä¸è¶…è¿‡ 3.3Vï¼š
  - å…ˆåœ¨å®žéªŒç”µæºä¸Šä»¿çœŸï¼ˆå¦‚ 12.6Vï¼‰ï¼›
  - æµ‹â€œé‡‡æ ·ç‚¹â€å¯¹ GND çš„ç”µåŽ‹ã€‚
- åˆ†åŽ‹ç”µé˜»ä¸è¦é€‰å¤ªå°ï¼ˆé¿å…æ— è°“çš„è€—ç”µï¼‰ï¼Œä¹Ÿä¸è¦å¤ªæžç«¯å¤§ï¼ˆå‡ å MÎ© ä¼šå¢žåŠ å™ªå£°ï¼‰ã€‚10k~100k é‡çº§åˆé€‚ï¼Œæœ¬æ–¹æ¡ˆæ˜¯ 100k + 33kã€‚

---

## 3. ESP32 å›ºä»¶è®¾è®¡ï¼šé‡‡æ ·ä¸Ž `/status` æ‰©å±•

ä»¥ä¸‹å†…å®¹åªæè¿°â€œæ”¾åœ¨å“ªäº›æ–‡ä»¶ã€åšå“ªäº›é€»è¾‘â€ï¼Œå®žçŽ°å¯ä»¥åŽæœŸå†è¡¥å……ã€‚

### 3.1 æ–°å¢žå…¨å±€çŠ¶æ€å˜é‡

åœ¨ `esp32_cam/CameraWebServer/CameraWebServer.ino` ä¸­ï¼š

- å¢žåŠ ä¸¤ä¸ªå…¨å±€å˜é‡ï¼ˆç¤ºæ„ï¼‰ï¼š
  - `battery_mv`ï¼šå½“å‰ä¼°ç®—çš„ç”µæ± ç”µåŽ‹ï¼Œå•ä½ mVï¼ˆæ•´æ•°ï¼‰ï¼Œä¾‹å¦‚ 11800 è¡¨ç¤º 11.8Vã€‚
  - `battery_percent`ï¼šä¼°ç®—çš„ç”µé‡ç™¾åˆ†æ¯”ï¼Œ0~100ã€‚

å»ºè®®å†åŠ å‡ ä¸ªå†…éƒ¨å˜é‡ç”¨äºŽæ»¤æ³¢ï¼Œæ¯”å¦‚ï¼š

- æœ€è¿‘ N æ¬¡ ADC é‡‡æ ·çš„æ»‘åŠ¨å¹³å‡ï¼›
- æœ€è¿‘ä¸€æ¬¡æ›´æ–°æ—¶é—´æˆ³ï¼ˆé¿å…è¿‡äºŽé¢‘ç¹é‡‡æ ·ï¼‰ã€‚

### 3.2 ADC åˆå§‹åŒ–ï¼ˆ`setup()` ä¸­ï¼‰

åœ¨ `setup()` é‡Œï¼Œå®Œæˆ ESP32 ADC çš„åˆå§‹åŒ–ï¼š

- é€‰æ‹©ä¸€ä¸ª ADC é€šé“ï¼ˆä½ æŽ¥çº¿çš„é‚£ä¸ª GPIOï¼‰ï¼›
- è®¾ç½®åˆ†è¾¨çŽ‡å’Œè¾“å…¥è¡°å‡ï¼š
  - ä¾‹å¦‚ä½¿ç”¨ Arduino-ESP32 æä¾›çš„ `analogReadResolution(12)`ã€`analogSetAttenuation(ADC_11db)`ï¼›
- è¯´æ˜Žï¼š
  - **ADC é€šé“ç¼–å·**ï¼›
  - **å®žé™…è¿žæŽ¥åˆ°çš„ GPIO å¼•è„š**ï¼›
  - **ä½¿ç”¨çš„å‚è€ƒç”µåŽ‹å’Œåˆ†è¾¨çŽ‡**ï¼ˆé»˜è®¤ 12 bitï¼Œ0~4095ï¼Œå¯¹åº” 0~3.3Vï¼‰ã€‚

### 3.3 å‘¨æœŸé‡‡æ ·ä¸Žç”µåŽ‹è®¡ç®—

åœ¨ `loop()` æˆ–ä¸€ä¸ª FreeRTOS ä»»åŠ¡é‡Œï¼Œå®šæœŸï¼ˆå¦‚ 500ms~1sï¼‰æ‰§è¡Œï¼š

1. åˆ¤æ–­è·ä¸Šæ¬¡é‡‡æ ·æ—¶é—´æ˜¯å¦è¶…è¿‡è®¾å®šé—´éš”ï¼Œå¦åˆ™ç›´æŽ¥è¿”å›žï¼›
2. è¿žç»­è¯»å– ADC N æ¬¡ï¼ˆå¦‚ 8 æ¬¡ï¼‰ï¼Œå–å¹³å‡å€¼ `adc_avg`ï¼Œå‡å°‘æŠ–åŠ¨ï¼›
3. æ ¹æ® ADC å€¼è®¡ç®—â€œé‡‡æ ·ç‚¹ç”µåŽ‹â€ï¼š

   \[
   V_{sense} = \frac{adc\_avg}{ADC\_max} \times V_{ref}
   \]

   - `ADC_max = 4095`ï¼ˆ12bitï¼‰
   - `V_ref` è¿‘ä¼¼ 3.3Vï¼ˆå®žé™…ç•¥æœ‰åå·®ï¼Œå¯ç”¨æ ¡å‡†ç³»æ•°ä¿®æ­£ï¼‰ã€‚

4. æ ¹æ®åˆ†åŽ‹æ¯”åæŽ¨å‡ºç”µæ± ç”µåŽ‹ï¼š

   \[
   V_{bat} = V_{sense} \times \frac{R1 + R2}{R2}
   \]

   ç„¶åŽè½¬æˆ mV å­˜åˆ° `battery_mv`ã€‚

5. å°† `battery_mv` æŠ˜ç®—æˆå¤§è‡´ç”µé‡ç™¾åˆ†æ¯” `battery_percent`ï¼š

   - ç®€å•çº¿æ€§è¿‘ä¼¼ï¼ˆ3S é”‚ç”µç²—ç•¥æ¢ç®—ï¼‰ï¼š
     - 12.6V â‰ˆ 100%
     - 11.1V â‰ˆ 50%
     - 10.5V â‰ˆ 0%ï¼ˆå†ä½Žå°±ç›´æŽ¥ç®— 0ï¼‰
   - æˆ–è€…ç”¨åˆ†æ®µçº¿æ€§æ˜ å°„ï¼Œåœ¨ä»£ç ä¸­å®žçŽ°å³å¯ã€‚

6. å¯¹ `battery_mv` åšæ»‘åŠ¨å¹³å‡ï¼Œå‡å°‘ Web ç«¯çœ‹åˆ°çš„ç”µåŽ‹é—ªçƒã€‚

> å®žçŽ°æ—¶å»ºè®®å…ˆåœ¨ä¸²å£ä¸­æ‰“å° `adc_avg`ã€`V_sense`ã€`battery_mv`ï¼Œç”¨ä¸‡ç”¨è¡¨å®žæµ‹ç”µæ± ç”µåŽ‹åšä¸€è½®â€œæ ¡å‡†â€ï¼Œä¿®æ­£åˆ†åŽ‹æ¯”å’Œ Vref åå·®ã€‚

### 3.4 `/status` JSON æ‰©å±•

åœ¨ `esp32_cam/CameraWebServer/app_httpd.cpp` çš„ `/status` handler é‡Œï¼š

- åœ¨åŽŸæœ‰ JSON ä¸­æ–°å¢žä¸¤ä¸ªå­—æ®µï¼š
  - `batt_mv`ï¼šå½“å‰ç”µæ± ç”µåŽ‹ï¼ˆmVï¼‰ï¼›
  - `batt_percent`ï¼šä¼°ç®—ç”µé‡ç™¾åˆ†æ¯”ï¼ˆ0~100ï¼‰ã€‚
- çº¦å®šå«ä¹‰ï¼š
  - å½“ `batt_mv` ä¸º 0 æˆ–è´Ÿæ•°æ—¶ï¼Œå¯ä»¥è®¤ä¸ºâ€œç”µæ± ç”µåŽ‹æœªçŸ¥/æœªæŽ¥ä¼ æ„Ÿç”µè·¯â€ï¼›
  - `batt_percent` ä¸º -1 æ—¶ä¹Ÿå¯ä»¥ä½œä¸ºâ€œæ— æ•°æ®â€çš„æ ‡å¿—ã€‚

ç¤ºä¾‹ `/status` å“åº”ç‰‡æ®µï¼š

```jsonc
{
  "fw_version": "main-abc1234",
  "ota_last_result": 1,
  "ota_last_error": 0,
  "ota_last_size": 1234560,
  // ...
  "batt_mv": 11520,
  "batt_percent": 62
}
```

---

## 4. Web å‰ç«¯è®¾è®¡ï¼šæ˜¾ç¤ºç”µé‡ä¸Žé¢„è­¦é€»è¾‘

Web å‰ç«¯ä¸»è¦æ”¹ `web/main.js` å’Œ HTML ä¸­çš„çŠ¶æ€æ˜¾ç¤ºåŒºåŸŸã€‚

### 4.1 æ–°å¢žçŠ¶æ€æ˜¾ç¤ºå…ƒç´ 

åœ¨é¡µé¢ä¸Šé¢„ç•™ä¸€ä¸ªâ€œç”µé‡æ˜¾ç¤ºåŒºåŸŸâ€ï¼Œä¾‹å¦‚ï¼š

- é¡¶éƒ¨çŠ¶æ€æ é‡Œæ·»åŠ ä¸€ä¸ªâ€œç”µæ± å›¾æ ‡ + æ–‡æœ¬â€ï¼Œå¦‚ï¼š`ðŸ”‹ 11.5V (62%)`ï¼›
- æˆ–åœ¨åŽŸæœ‰çš„â€œå½“å‰çŠ¶æ€å¡ç‰‡â€ä¸­åŠ ä¸€è¡Œ `Battery: 11.5V / 62%`ã€‚

å»ºè®®æ–°å¢žä¸€ä¸ª DOM å…ƒç´  IDï¼Œä¾‹å¦‚ `batteryIndicator`ï¼Œæ˜¾ç¤ºæ ¼å¼å¯ä»¥æ˜¯ï¼š

```text
11.5V (62%)
```

### 4.2 JavaScript é€»è¾‘æ”¹åŠ¨ç‚¹

åœ¨ `web/main.js` ä¸­ï¼š

1. **æ‰©å±• `loadCameraStatus()`**ï¼š
   - åœ¨è§£æž `/status` è¿”å›ž JSON æ—¶ï¼Œè¯»å– `batt_mv` ä¸Ž `batt_percent` å­—æ®µï¼›
   - è½¬æˆå¯è¯»æ–‡æœ¬ï¼ˆV = mV / 1000ï¼‰ï¼›
   - æ›´æ–° `batteryIndicator` çš„æ–‡æœ¬å†…å®¹å’Œ CSS classï¼ˆç”¨äºŽå˜è‰²ï¼‰ã€‚

2. **é¢„è­¦é˜ˆå€¼ä¸Ž UI é€»è¾‘**ï¼ˆå‚è€ƒ 3S é”‚ç”µï¼Œå¸¦è´Ÿè½½åœºæ™¯ï¼‰ï¼š

   - `>= 11.8V`ï¼šæ­£å¸¸ï¼ˆç»¿è‰²ï¼‰
   - `11.2V ~ 11.8V`ï¼šä¸­ç­‰ï¼ˆé»„è‰²ï¼‰
   - `10.8V ~ 11.2V`ï¼šä½Žç”µé¢„è­¦ï¼ˆæ©™è‰²ï¼‰
   - `< 10.8V`ï¼šä¸¥é‡ä½Žç”µï¼ˆçº¢è‰²ï¼‰

   æ ¹æ® `batt_mv` æ‰€åœ¨åŒºé—´ï¼Œç»™ `batteryIndicator` åº”ç”¨ä¸åŒ CSS classï¼š

   - `battery-ok`
   - `battery-warn`
   - `battery-critical`

   åœ¨ `battery-critical` ä¸‹å¯ä»¥é¢å¤–æ˜¾ç¤ºæ–‡å­—æé†’ï¼Œä¾‹å¦‚â€œè¯·å°½å¿«å……ç”µï¼Œé¿å…ç”µæ± è¿‡æ”¾â€ã€‚

3. **è½®è¯¢é¢‘çŽ‡**ï¼š

   - å¦‚æžœå½“å‰å·²æœ‰å®šæ—¶åˆ·æ–° `/status` çš„é€»è¾‘ï¼Œå¯ä»¥å¤ç”¨ï¼›
   - å¦‚æžœæ²¡æœ‰ï¼Œå¯ä»¥æ–°å¢žä¸€ä¸ª `setInterval` æ¯ 1~2 ç§’è°ƒç”¨ä¸€æ¬¡ `loadCameraStatus()`ã€‚

### 4.3 æŠ–åŠ¨ä¸Žå¼‚å¸¸æƒ…å†µå¤„ç†

å‰ç«¯å»ºè®®ï¼š

- å¯¹ç”µåŽ‹æ˜¾ç¤ºåšç®€å•â€œæ­»åŒºâ€ï¼šå¦‚æžœæ–°å€¼ä¸Žæ—§å€¼å·®åˆ«å¾ˆå°ï¼ˆä¾‹å¦‚ < 0.05Vï¼‰ï¼Œå¯ä»¥ä¸æ›´æ–° UIï¼Œå‡å°‘é¢‘é—ªï¼›
- å½“ `/status` ä¸­ç¼ºå°‘ `batt_mv` å­—æ®µæˆ–å€¼ä¸º 0/è´Ÿæ•°æ—¶ï¼š
  - åœ¨ UI ä¸Šæ˜¾ç¤º `--` æˆ– â€œæœªçŸ¥â€ï¼›
  - å°†å›¾æ ‡æ¢å¤ä¸ºä¸­æ€§ç°è‰²ã€‚

---

## 5. å¯é€‰æ‰©å±•ï¼šSTM32 ç«¯ä½Žç”µä¿æŠ¤

å½“å‰æ–¹æ¡ˆåªåœ¨ Web ç«¯åšâ€œç”µé‡é¢„è­¦æç¤ºâ€ï¼Œä¸æ”¹å˜å°è½¦è¡Œä¸ºã€‚

å¦‚æžœåŽæœŸéœ€è¦ï¼Œå¯ä»¥è¿›ä¸€æ­¥ï¼š

1. åœ¨ STM32 ä¸Šä¹ŸæŽ¥å…¥åŒä¸€åˆ†åŽ‹ç”µè·¯çš„â€œé‡‡æ ·ç‚¹â€ï¼Œç”¨ STM32 ADC é‡‡æ ·ç”µæ± ç”µåŽ‹ï¼›
2. åœ¨ STM32 çš„ `motor.c` / ä¸»å¾ªçŽ¯ä¸­åŠ å…¥ä½Žç”µä¿æŠ¤é€»è¾‘ï¼Œä¾‹å¦‚ï¼š
   - å½“ `Vbat < 10.8V` æ—¶é™åˆ¶æœ€å¤§æ²¹é—¨ï¼›
   - å½“ `Vbat < 10.5V` æ—¶å¼ºåˆ¶åœæ­¢ç”µæœºå¹¶ç¦æ­¢ç»§ç»­è¿è¡Œï¼›
3. å¯é€‰ï¼šé€šè¿‡ UART åè®®å¢žåŠ â€œçŠ¶æ€ä¸ŠæŠ¥â€æ¶ˆæ¯ï¼ŒæŠŠ `batt_mv` å›žä¼ ç»™ ESP32 å’Œ Webã€‚

è¿™éƒ¨åˆ†å¯ä»¥åœ¨ç”µé‡æ˜¾ç¤ºåŠŸèƒ½ç¨³å®šåŽå†è€ƒè™‘å®žçŽ°ã€‚

---

## 6. è°ƒè¯•ä¸Žæ ¡å‡†å»ºè®®

å®žé™…å®žçŽ°åŽï¼Œå»ºè®®æŒ‰ä»¥ä¸‹æ­¥éª¤æ ¡å‡†å’ŒéªŒè¯ï¼š

1. **ç©ºè½½æ ¡å‡†**ï¼š
   - æ–­å¼€å¤§è´Ÿè½½ï¼ˆç”µæœº/èˆµæœºï¼‰æˆ–ä¿æŒç”µæœºåœè½¬ï¼›
   - ä½¿ç”¨ä¸‡ç”¨è¡¨ç›´æŽ¥æµ‹é‡ç”µæ± åŒ…ç”µåŽ‹ `Vbat_real`ï¼›
   - é€šè¿‡ä¸²å£æ‰“å°/ `/status` çœ‹åˆ° ESP32 è®¡ç®—çš„ `battery_mv`ï¼›
   - å¯¹æ¯”ä¸¤è€…ï¼Œè°ƒæ•´è½¯ä»¶ä¸­çš„â€œåˆ†åŽ‹æ¯”ç³»æ•°â€æˆ–å¢žåŠ ä¸€ä¸ª `calibration_factor`ï¼Œå°½é‡è®©äºŒè€…æŽ¥è¿‘ã€‚

2. **è´Ÿè½½ä¸‹è§‚æµ‹**ï¼š
   - è®©å°è½¦æ­£å¸¸è¡Œé©¶ï¼Œé‡å¤ä¸Šä¸€æ­¥ï¼›
   - è§‚å¯Ÿåœ¨åŠ é€Ÿ/è½¬å‘æ—¶ç”µåŽ‹çž¬é—´ä¸‹è·Œå¹…åº¦æœ‰å¤šå¤§ï¼Œé€‚å½“æ”¾å®½ Web é¢„è­¦é˜ˆå€¼æˆ–å¢žåŠ é‡‡æ ·/æ˜¾ç¤ºæ»¤æ³¢ã€‚

3. **Web ç«¯ UI éªŒè¯**ï¼š
   - åœ¨ç”µåŽ‹ä»Žæ»¡ç”µæ…¢æ…¢ç”¨åˆ°ä½Žç”µçš„è¿‡ç¨‹ä¸­ï¼š
     - æ£€æŸ¥ä¸åŒç”µåŽ‹åŒºé—´ä¸‹ç”µæ± å›¾æ ‡é¢œè‰²/æç¤ºæ˜¯å¦æŒ‰é¢„æœŸå˜åŒ–ï¼›
     - æ£€æŸ¥ç”µåŽ‹æ˜¾ç¤ºæ˜¯å¦ç¨³å®šï¼Œæ²¡æœ‰æ˜Žæ˜¾ä¹±è·³ã€‚

---

ä»¥ä¸Šè®¾è®¡è¯´æ˜Žä½œä¸ºå®žçŽ°å‰çš„â€œè“å›¾â€ï¼Œä½ å¯ä»¥åŽç»­æŒ‰ç…§ï¼šå…ˆæŽ¥åˆ†åŽ‹ç”µè·¯ â†’ å†å®žçŽ° ESP32 é‡‡æ ·ä¸Ž `/status` å­—æ®µ â†’ æœ€åŽæ‰©å±• Web å‰ç«¯ UI çš„é¡ºåºé€æ­¥å®Œæˆã€‚
